#:import toast kivymd.toast.toast
#:import resource_path main.resource_path
#:import ScrollView kivy.uix.scrollview
#:import colors kivymd.color_definitions
#:import MDDropdownMenu kivymd.uix.menu
#:import MDApp kivymd.app

#creating the screen manager for multiple screens
ScreenManager:
    id: scr_manager

    LoginScreen:
        name: "LoginScreen"

    RegisterScreen:
        name: "RegisterScreen"

    HomeScreen:
        name: "HomeScreen"

    AddInvoiceScreen:
        name: "AddInvoiceScreen"

    TradingPartnerScreen:
        name: "TradingPartnerScreen"

    InvoiceScreen:
        name: "InvoiceScreen"

    FilterSearchInvoiceScreen:
        name: "FilterSearchInvoiceScreen"

    Filtered_searched_display_Screen:
        name: "Filtered_searched_display_Screen"

    Filtered_searched_display_with_trading_partner_info_Screen
        name: "Filtered_searched_display_with_trading_partner_info_Screen"

    Update_invoice_Screen
        name: "Update_invoice_Screen"

    Update_trading_partner_Screen
        name: "Update_trading_partner_Screen"

    Export_excel_filtered_table_Screen:
        name: "Export_excel_filtered_table_Screen"

    Generate_reports_Screen:
        name: "Generate_reports_Screen"








#the home screen
<HomeScreen>:
#this is for the visual
    BoxLayout:
        orientation: 'vertical'
        size: root.height, root.width

        FitImage:
            source: resource_path("coke_snack.jpeg")

    MDCard:
        size_hint: 0.5, 0.75
        elevation: 10
        pos_hint: {"center_x": 0.5, "center_y": 0.5}
        orientation: "vertical"



        MDBoxLayout:
            id: content #id or name
            adaptive_height: True
            orientation: "vertical"
            padding: dp(30)
            spacing: dp(20)

            MDBoxLayout:
                id: logo_box
                adaptive_height: True
                orientation: "vertical"


                Image:
                    source: resource_path("CoinSnack_Logo.png")

            MDLabel:

            MDRectangleFlatIconButton:
#                icon: "account-circle"
                pos_hint: {'x': .315}
                text: "Add invoices+"
                on_release:
                    root.add_invoices()

            MDRectangleFlatIconButton:
#                icon: "food"
                pos_hint: {'x': .305}
                text: "Filter/search invoices"
                on_release:
                    root.filter_search_invoices()

            MDRectangleFlatIconButton:
#                icon: "logout"
                pos_hint: {'x': .340}
                text: "Generate reports"
                on_release:
                    root.generate_reports()

            MDRectangleFlatIconButton:
                icon: "logout"
                pos_hint: {'x': .340}
                text: "Log out"
                on_release:
                    root.log_out()


#            MDRectangleFlatIconButton:
#                icon: "shopping"
#                pos_hint: {'x': .340}
#                text: "Check orders record"
#                on_release:
#                    root.orders_check()

            MDLabel:

            MDLabel:

            MDLabel:

            MDLabel:

            MDLabel:

            MDLabel:








#the RegisterScreen
<RegisterScreen>:
    BoxLayout:
        orientation: 'vertical'
        size: root.height, root.width

        FitImage:
            source: resource_path("coke_snack.jpeg")

    MDCard:
        size_hint: 0.5, 1
        elevation: 10
        pos_hint: {"center_x": 0.5, "center_y": 0.5}
        orientation: "vertical"




        MDBoxLayout:
            id: content #id or name
            adaptive_height: True
            orientation: "vertical"
            padding: dp(30)
            spacing: dp(20)


            MDBoxLayout:
                id: logo_box
                adaptive_height: True
                orientation: "vertical"


                Image:
                    source: resource_path("CoinSnack_Logo.png")


            MDLabel:
                text: "Financiaz"
                font_style: "H4"
                halign:"center"

            MDLabel:

            MDLabel:

            MDLabel:
                text: "REGISTER"
                font_style: "H6"
                halign: "center"

            MDLabel:

            MDTextField:
                id: username_input
                hint_text: "Username"
#                icon_left: "email"
                helper_text: "Invalid username"
                helper_text_mode: "on_error"
                required: True


            MDTextField:
                id:password_input
                hint_text: "Password"
                icon_right: "eye-off"
                helper_text: "Invalid password"
                helper_text_mode: "on_error"
                required: True
                password: True

            MDTextField:
                id:password_check
                hint_text: "Password Check"
                icon_right: "eye-off"
                helper_text: "Invalid password"
                helper_text_mode: "on_error"
                required: True
                password: True

            MDRectangleFlatIconButton:
                icon: "food"
                text: "Register"
                on_release:
                    root.try_register()

            MDRectangleFlatIconButton:
                icon: "account-key"
                text: "Log in"
                on_release:
                    root.parent.current = "LoginScreen"


<AddInvoiceScreen>:
    BoxLayout:
        orientation: 'vertical'
        size: root.height, root.width

    MDCard:
        size_hint: 0.5, 0.75
        elevation: 10
        pos_hint: {"center_x": 0.5, "center_y": 0.5}
        orientation: "vertical"


        MDBoxLayout:
            id: content #id or name
            adaptive_height: True
            orientation: "vertical"
            padding: dp(30)
            spacing: dp(20)

        MDRectangleFlatIconButton:
#           icon: "account-circle"
            pos_hint: {'x': .315}
            text: "Add fixed data about Trading Partners+"
            on_release:
                root.add_trading_partner()

        MDRectangleFlatIconButton:
    #           icon: "food"
            pos_hint: {'x': .305}
            text: "Add non-fixed data about Invoices+"
            on_release:
                root.add_invoices_real()

        MDRectangleFlatIconButton:
    #           icon: "food"
            pos_hint: {'x': .305}
            text: "<-Back to menu"
            on_release:
                root.back_to_menu()

<InvoiceScreen>

    BoxLayout:
        orientation: 'vertical'
        size: root.height, root.width

        FitImage:
            source: resource_path("coke_snack.jpeg")

        MDLabel:
            text: "Financiaz"
            font_style: "H6"
            halign:"left"

        MDLabel:

        MDLabel:
            text: "ADD INVOICE INFO"
            font_style: "H6"
            halign:"left"

        ScrollView:
            size_hint_y: 50

            do_scroll_x: False
            do_scroll_y: True

            GridLayout:
                id: content #id or name
                size: (root.width, root.height)
                #in order for scroll view to work, need to set all size hint to None
                size_hint_x: None
                size_hint_y: None
                cols: 1
                #key for making comfortable is the height below:
                height: root.height*3
                #padding helps centerize elements, making better view
                padding: dp(30)
                #spacing put some space between elements
                spacing: dp(20)

                #the MDTextField below will be changed to a SelectField later!
                MDTextField:
                    id: trading_partner_input
                    hint_text: "Select Trading Partner"
    #                icon_left: "email"
                    required: True


                MDTextField:
                    id: invoice_date_input
                    hint_text: "Invoice date (Format YYYY-MM-DD)"
    #                icon_left: "email"
                    required: True

                MDTextField:
                    id:invoice_number_input
                    hint_text: "Invoice number"
    #                icon_right: "eye-off"
                    required: True

                MDTextField:
                    id:invoice_amount_input
                    hint_text: "Invoice amount"
    #                icon_right: "eye-off"
                    required: True

                #the MDTextField below will be changed to a SelectField later!
                MDTextField:
                    id:invoice_currency_input
                    hint_text: "Invoice currency"
    #                icon_right: "eye-off"
                    required: True


                MDTextField:
                    id:tax_input
                    hint_text: "Tax%"
    #                icon_right: "eye-off"
                    required: True

                MDTextField:
                    id:actual_payment_date_input
                    hint_text: "Actual payment date (Format YYYY-MM-DD)"
    #                icon_right: "eye-off"
                    required: False

                #the MDTextField below will be changed to a SelectField later!
                MDTextField:
                    id:actual_payment_accepted_by_input
                    hint_text: "Actual payment date accepted by"
    #                icon_right: "eye-off"
                    required: False

                MDTextField:
                    id:description_input
                    hint_text: "Description"
    #                icon_right: "eye-off"
                    required: True

                MDTextField:
                    id:overdue_period_input
                    hint_text: "Overdue period (days) "
    #                icon_right: "eye-off"
                    required: False

                MDTextField:
                    id:notes_for_penalty_input
                    hint_text: "Notes for penalty overdue"
    #                icon_right: "eye-off"
                    required: False

                #the MDTextField below will be changed to a SelectField later!
                MDTextField:
                    id:occurent_input
                    hint_text: "Occurent"
    #                icon_right: "eye-off"
                    required: False

                MDTextFieldRound:
                    id:paid_amount_input
                    hint_text: "If invoice is paid, input paid amount HERE. Else, LEAVE ALL ORANGE INPUTS BELOW BLANK:"
                    normal_color: "5191b8"
    #                icon_right: "eye-off"
                    required: False

                MDTextFieldRound:
                    id:payment_date1_input
                    hint_text: "And input payment date (Format YYYY-MM-DD)"
                    normal_color: "5191b8"
    #                icon_right: "eye-off"
                    required: False

                MDTextFieldRound:
                    id:payment_date2_input
                    hint_text: "If the invoices is paid 2 times (Format YYYY-MM-DD)"
                    normal_color: "5191b8"
    #                icon_right: "eye-off"
                    required: False

                MDRectangleFlatIconButton:
    #                icon: "account-key"
                    text: "Add to database+"
                    on_release:
                        root.add_to_database()

                MDRectangleFlatIconButton:
            #           icon: "food"
                    pos_hint: {'x': .305}
                    text: "<-Back to menu"
                    on_release:
                        root.back_to_menu()



<TradingPartnerScreen>

    BoxLayout:
        orientation: 'vertical'
        size: root.height, root.width

        FitImage:
            source: resource_path("coke_snack.jpeg")

        MDLabel:
            text: "Financiaz"
            font_style: "H6"
            halign:"left"

        MDLabel:

        MDLabel:
            text: "ADD TRADING PARTNER INFO"
            font_style: "H6"
            halign:"left"

        ScrollView:
            size_hint_y: 50

            do_scroll_x: False
            do_scroll_y: True

            GridLayout:
                id: content #id or name
                size: (root.width, root.height)
                #in order for scroll view to work, need to set all size hint to None
                size_hint_x: None
                size_hint_y: None
                cols: 1
                #key for making comfortable is the height below:
                height: root.height*2
                #padding helps centerize elements, making better view
                padding: dp(30)
                #spacing put some space between elements
                spacing: dp(20)


                MDTextField:
                    id: trading_partner_name_input
                    hint_text: "Trading partner name"
    #                icon_left: "email"
                    required: True

                MDTextField:
                    id:supplier_name_input
                    hint_text: "Supplier name"
    #                icon_right: "eye-off"
                    required: True

                MDTextField:
                    id:sector_input
                    hint_text: "Sector"
    #                icon_right: "eye-off"
                    required: True

                MDTextField:
                    id:contract_days_input
                    hint_text: "Contract days"
    #                icon_right: "eye-off"
                    required: True

                MDTextField:
                    id:priority_rank_input
                    hint_text: "Priority rank (1~3) (1=highest, 3=lowest)"
    #                icon_right: "eye-off"
                    required: True

                MDTextField:
                    id:remit_to_bank_account_name_input
                    hint_text: "Remit-To-Bank Account Name"
    #                icon_right: "eye-off"
                    required: True

                MDTextField:
                    id:remit_to_bank_account_number_input
                    hint_text: "Remit-To-Bank Account Number"
    #                icon_right: "eye-off"
                    required: True


                MDRectangleFlatIconButton:
    #                icon: "account-key"
                    text: "Add to database+"
                    on_release:
                        root.add_to_database()

                MDRectangleFlatIconButton:
            #           icon: "food"
                    pos_hint: {'x': .305}
                    text: "<-Back to menu"
                    on_release:
                        root.back_to_menu()

#    MDCard:
#        size_hint: 0.5, 0.75
#        elevation: 10
#        pos_hint: {"center_x": 0.5, "center_y": 0.5}
#        orientation: "vertical"
#
#
#
#        MDBoxLayout:
#            id: content #id or name
#            adaptive_height: True
#            orientation: "vertical"
#            padding: dp(30)
#            spacing: dp(20)





#The LoginScreen
<LoginScreen>:
    BoxLayout:
        orientation: 'vertical'
        size: root.height, root.width

        FitImage:
            source: resource_path("coke_snack.jpeg")

    MDCard:
        size_hint: 0.5, 0.75
        elevation: 10
        pos_hint: {"center_x": 0.5, "center_y": 0.5}
        orientation: "vertical"



        MDBoxLayout:
            id: content #id or name
            adaptive_height: True
            orientation: "vertical"
            padding: dp(30)
            spacing: dp(20)


            MDLabel:
                text: "Financiaz"
                font_style: "H4"
                halign:"center"

            MDLabel:

            MDLabel:

            MDLabel:
                text: "LOGIN"
                font_style: "H6"
                halign: "center"

            MDTextField:
                id: username_input
                hint_text: "Username"
#                icon_left: "email"
                helper_text: "Invalid username"
                helper_text_mode: "on_error"
                required: True

            MDTextField:
                id:password_input
                hint_text: "Password"
                icon_right: "eye-off"
                helper_text: "Invalid password"
                helper_text_mode: "on_error"
                required: True
                password: True

            MDRectangleFlatIconButton:
                icon: "account-key"
                text: "Log in"
                on_release:
                    root.try_login()

            MDBoxLayout:
                adaptive_height: True
                halign: "right"

                MDRectangleFlatIconButton:
                    icon: "food"
                    text: "Register"
                    on_press:
                        print("here")
                        root.parent.current = "RegisterScreen"


<FilterSearchInvoiceScreen>:

    BoxLayout:
        orientation: 'vertical'
        size: root.height, root.width

        FitImage:
            source: resource_path("coke_snack.jpeg")

        MDLabel:
            text: "Financiaz"
            font_style: "H6"
            halign:"left"

        MDLabel:

        MDLabel:
            text: "FILTER/SEARCH INVOICES SCREEN"
            font_style: "H6"
            halign:"left"

        ScrollView:
            size_hint_y: 50

            do_scroll_x: False
            do_scroll_y: True

            GridLayout:
                id: content #id or name
                size: (root.width, root.height)
                #in order for scroll view to work, need to set all size hint to None
                size_hint_x: None
                size_hint_y: None
                cols: 1
                #key for making comfortable is the height below:
                height: root.height*2
                #padding helps centerize elements, making better view
                padding: dp(30)
                #spacing put some space between elements
                spacing: dp(20)


                MDTextField:
                    id: invoice_number_input
                    hint_text: "Invoice number"
    #                icon_left: "email"
                    required: False

                MDTextField:
                    id:trading_partner_name_input
                    hint_text: "Trading partner name"
    #                icon_right: "eye-off"
                    required: False

                MDLabel:
                    text: "Invoices added date"
                    font_style: "Subtitle2"
                    halign:"left"

                MDTextField:
                    id:invoices_added_date_from_input
                    hint_text: "From (Format: YYYY-MM-DD)"
    #                icon_right: "eye-off"
                    required: False

                MDTextField:
                    id:invoices_added_date_to_input
                    hint_text: "to (Format: YYYY-MM-DD)"
    #                icon_right: "eye-off"
                    required: False

                MDLabel:
                    text: "Invoices date"
                    font_style: "Subtitle2"
                    halign:"left"

                MDTextField:
                    id:invoices_date_from_input
                    hint_text: "From (Format: YYYY-MM-DD)"
    #                icon_right: "eye-off"
                    required: False

                MDTextField:
                    id:invoices_date_to_input
                    hint_text: "to (Format: YYYY-MM-DD)"
    #                icon_right: "eye-off"
                    required: False



                MDLabel:
                    text: "Choose the payment status:"
                    font_style: "Subtitle2"
                    halign:"left"

                MDDropDownItem:
                    id: payment_status_input
                    text: "None"
                    pos_hint: {'center_x': 0.5, 'center_y': 0.6}
                    current_item: "None chosen"
                    dropdown_bg: [1, 1, 1, 1]
                    on_release:
                        root.menu.open()

#                MDRaisedButton:
#                    pos_hint: {'center_x': 0.5, 'center_y': 0.3}
#                    text: 'Check Your Choice'
#                    on_release: toast(payment_status_input.current_item)


                MDRectangleFlatIconButton:
    #                icon: "account-key"
                    text: "Filter/search"
                    on_release:
                        root.filter_search_invoices()

                MDRectangleFlatIconButton:
            #           icon: "food"
                    pos_hint: {'x': .305}
                    text: "<-Back to menu"
                    on_release:
                        root.back_to_menu()


<Filtered_searched_display_Screen>:

    BoxLayout:
        orientation: 'vertical'
        size: root.height, root.width

        FitImage:
            source: resource_path("coke_snack.jpeg")

        MDLabel:
            text: "Financiaz"
            font_style: "H6"
            halign:"left"


        MDLabel:
            text: "FILTERED/SEARCHED INVOICES SCREEN"
            font_style: "H6"
            halign:"left"

        MDLabel:

        MDLabel:

        MDCard:
            id: card1
            size_hint: 1, 0.1
            elevation: 0
#            padding: 30
#            pos_hint: {"center_x": 0.5, "top": 0.8}
            orientation: "horizontal"

            MDRectangleFlatIconButton:
                pos_hint: {'x': 0, "y": 1}
                text: "<-Back to menu"
                halign: "left"
                on_release:
                    root.back_to_menu()

            MDRectangleFlatIconButton:
                pos_hint: {'x': 2, "y": 1}
                text: "Include Trading Partner Info"
                halign: "left"
                on_release:
                    root.include_trading_partner_info()

        MDLabel:

        MDCard:
            id: card4
            size_hint: 1, 0.1
            elevation: 0
#            padding: 30
#            pos_hint_x: 0.5

#            pos_hint: {"center_x": 0.5, "top": 0.6}
            orientation: "horizontal"

            MDRectangleFlatIconButton:
        #           icon: "food"
                pos_hint: {'x': .305}
                text: "<-Back to search/filter screen"
                on_release:
                    root.back_to_search_screen()

            MDRectangleFlatIconButton:
        #           icon: "food"
                pos_hint: {'x': .305}
                text: "Export to Excel"
                on_release:
                    root.export_excel()


        MDLabel:

        MDLabel:

        MDCard:
            id: card3
            size_hint: 1, 0.1
            elevation: 0
#            padding: 30
#            pos_hint: {"center_x": 0.5, "top": 0.8}
            orientation: "horizontal"


            MDLabel:
                pos_hint: {'x': 0, "y": 5}
                text: "Edit invoice number: "
                font_style: "Body1"
                halign:"left"

            MDTextField:

                pos_hint: {'x': 1, "y": 1.7}
                id: edit_invoice_number_input
#                hint_text: "..."
#                icon_left: "email"
                helper_text: "Invalid number"
                helper_text_mode: "on_error"
                required: False
                halign:"left"



            MDIconButton:
                pos_hint: {'x': 2, "y": 1.7}
                icon:  "fountain-pen"
                halign:"left"
                on_release:
                    root.edit_invoice()



        MDLabel:

        MDLabel:


        MDCard:
            id: card2
            size_hint: 1, 0.1
            elevation: 0
#            padding: 30
#            pos_hint_x: 0.5

#            pos_hint: {"center_x": 0.5, "top": 0.6}
            orientation: "horizontal"

            MDLabel:
                pos_hint: {'x': 0, "y": 5}
                text: "Delete invoice number: "
                font_style: "Body1"
                halign:"left"

            MDTextField:
                pos_hint: {'x': 1, "y": 5}
                id: delete_invoice_number_input
#                hint_text: "..."
#                icon_left: "email"
                helper_text: "Invalid number"
                helper_text_mode: "on_error"
                required: False
                halign:"left"


            MDIconButton:
                pos_hint: {'x': 2, "y": 5}
                icon:  "trash-can"
                halign:"left"
                on_release:
                    root.remove_invoice()


        MDLabel:



        ScrollView:
#            size_hint_y: 50
            size_hint_y: 10
            size_hint_x: 1

            do_scroll_x: True
            do_scroll_y: True



            GridLayout:

                id: container #id or name
                #the root.width*10 code below is the magic that
                #allows the columns to have larger size while being scrollable:
                size: (root.width*3.75, root.height)
                #in order for scroll view to work, need to set all size hint to None
                size_hint_x: None
                size_hint_y: None
                #key for making comfortable is the height below:
                height: root.height*4
                cols:21
                row_default_height: 60
                row_force_default: True




<Filtered_searched_display_with_trading_partner_info_Screen>:

    BoxLayout:
        orientation: 'vertical'
        size: root.height, root.width

        FitImage:
            source: resource_path("coke_snack.jpeg")

        MDLabel:
            text: "Financiaz"
            font_style: "H6"
            halign:"left"

        MDLabel:

        MDLabel:
            text: "FILTERED/SEARCHED INVOICES SCREEN"
            font_style: "H6"
            halign:"left"

        MDLabel:

        MDLabel:

        MDCard:
            size_hint: 1, 0.1
            elevation: 0
            padding: 30
            pos_hint: {"center_x": 0.5, "top": 0.8}
            orientation: "horizontal"

            MDRectangleFlatIconButton:
                pos_hint: {'x': 0, "y": 1}
                text: "<-Back to menu"
                halign: "left"
                on_release:
                    root.back_to_menu()


            MDRectangleFlatIconButton:
                pos_hint: {'x': 4, "y": 1}
                text: "Don't include Trading Partner Info"
                halign: "left"
                on_release:
                    root.non_include_trading_partner_info()

        MDLabel:

        MDLabel:


        ScrollView:
            size_hint_y: 50
            size_hint_x: 1

            do_scroll_x: True
            do_scroll_y: True




            GridLayout:

                id: container #id or name
                #the root.width*10 code below is the magic that
                #allows the columns to have larger size while being scrollable:
                size: (root.width*3.75, root.height)
                #in order for scroll view to work, need to set all size hint to None
                size_hint_x: None
                size_hint_y: None
                #key for making comfortable is the height below:
                height: root.height*4
                cols:28
                row_default_height: 60
                row_force_default: True


<Update_trading_partner_Screen>:

    BoxLayout:
        orientation: 'vertical'
        size: root.height, root.width

        FitImage:
            source: resource_path("coke_snack.jpeg")

        MDLabel:
            text: "Financiaz"
            font_style: "H6"
            halign:"left"

        MDLabel:

        MDLabel:
            text: "UPDATE TRADING PARTNER INFO"
            font_style: "H6"
            halign:"left"

        ScrollView:
            size_hint_y: 50

            do_scroll_x: False
            do_scroll_y: True

            GridLayout:
                id: content #id or name
                size: (root.width, root.height)
                #in order for scroll view to work, need to set all size hint to None
                size_hint_x: None
                size_hint_y: None
                cols: 1
                #key for making comfortable is the height below:
                height: root.height*3
                #padding helps centerize elements, making better view
                padding: dp(30)
                #spacing put some space between elements
                spacing: dp(20)

                MDLabel:
                    text: "To update any data about the trading partner, please type your new data into its field. After you fill all your new data, click the Update button to complete the process."
                    font_style: "Body2"
                    halign:"left"
                    bold: True

                MDLabel:
                    id: trading_partner_name_label
                    font_style: "Body1"
#                    halign:"left"

                MDTextField:
                    id: trading_partner_name_input
                    hint_text: "Update Trading Partner Name"
    #                icon_right: "eye-off"


                MDLabel:
                    id: supplier_name_label
                    font_style: "Body1"
                    halign:"left"

                MDTextField:
                    id: supplier_name_input
                    hint_text: "Update Supplier Name"
    #                icon_left: "email"


                MDLabel:
                    id: sector_label
                    font_style: "Body1"
                    halign:"left"

                MDTextField:
                    id:sector_input
                    hint_text: "Update Sector"
    #                icon_right: "eye-off"


                MDLabel:
                    id: contract_days_label
                    font_style: "Body1"
                    halign:"left"

                MDTextField:
                    id:contract_days_input
                    hint_text: "Update Contract Days"
    #                icon_right: "eye-off"


                MDLabel:
                    id: priority_rank_label
                    font_style: "Body1"
                    halign:"left"


                MDTextField:
                    id:priority_rank_input
                    hint_text: "Update Priority Rank"
    #                icon_right: "eye-off"


                MDLabel:
                    id: remit_to_bank_account_name_label
                    font_style: "Body1"
                    halign:"left"

                MDTextField:
                    id:remit_to_bank_account_name_input
                    hint_text: "Update Remit to bank account name"
    #                icon_right: "eye-off"


                MDLabel:
                    id: remit_to_bank_account_number_label
                    font_style: "Body1"
                    halign:"left"

                MDTextField:
                    id:remit_to_bank_account_number_input
                    hint_text: "Update Remit to bank account number"
    #                icon_right: "eye-off"


                MDRectangleFlatIconButton:
    #                icon: "account-key"
                    text: "Update trading partner"
                    on_release:
                        root.update_trading_partner()

                MDRectangleFlatIconButton:
            #           icon: "food"
                    pos_hint: {'x': .305}
                    text: "<-Back to menu"
                    on_release:
                        root.back_to_menu()


<Update_invoice_Screen>:

    BoxLayout:
        orientation: 'vertical'
        size: root.height, root.width

        FitImage:
            source: resource_path("coke_snack.jpeg")

        MDLabel:
            text: "Financiaz"
            font_style: "H6"
            halign:"left"

        MDLabel:

        MDLabel:
            text: "UPDATE INVOICE INFO"
            font_style: "H6"
            halign:"left"

        ScrollView:
            size_hint_y: 50

            do_scroll_x: False
            do_scroll_y: True

            GridLayout:
                id: content #id or name
                size: (root.width, root.height)
                #in order for scroll view to work, need to set all size hint to None
                size_hint_x: None
                size_hint_y: None
                cols: 1
                #key for making comfortable is the height below:
                height: root.height*3
                #padding helps centerize elements, making better view
                padding: dp(30)
                #spacing put some space between elements
                spacing: dp(20)

                MDLabel:
                    text: "To update any data about the invoice, please type your new data into its field. After you fill all your new data, click the Update button to complete the process."
                    font_style: "Body2"
                    halign:"left"
                    bold: True

                MDLabel:
                    id: trading_partner_label
                    font_style: "Body1"
                    halign:"left"

                MDLabel:
                    font_style: "Body2"
                    text: "For data integrity, once an invoice is added, its trading partner cannot be changed. However, you can click the icon below to update the information of the current trading partner:"


                MDIconButton:
                    icon: "factory"
                    on_release:
                        root.update_trading_partner()

                MDLabel:
                    id: invoice_date_label
                    font_style: "Body1"
                    halign:"left"

                MDTextField:
                    id: invoice_date_input
                    hint_text: "Update Invoice date (Format YYYY-MM-DD)"
    #                icon_left: "email"


                MDLabel:
                    id: invoice_number_label
                    font_style: "Body1"
                    halign:"left"

                MDTextField:
                    id:invoice_number_input
                    hint_text: "Update Invoice number"
    #                icon_right: "eye-off"


                MDLabel:
                    id: invoice_amount_label
                    font_style: "Body1"
                    halign:"left"

                MDTextField:
                    id:invoice_amount_input
                    hint_text: "Update Invoice amount"
    #                icon_right: "eye-off"


                MDLabel:
                    id: invoice_currency_label
                    font_style: "Body1"
                    halign:"left"

                #the MDTextField below will be changed to a SelectField later!
                MDTextField:
                    id:invoice_currency_input
                    hint_text: "Update Invoice currency"
    #                icon_right: "eye-off"


                MDLabel:
                    id: tax_input_label
                    font_style: "Body1"
                    halign:"left"

                MDTextField:
                    id:tax_input
                    hint_text: "Update Tax%"
    #                icon_right: "eye-off"


                MDLabel:
                    id: actual_payment_date_label
                    font_style: "Body1"
                    halign:"left"

                MDTextField:
                    id:actual_payment_date_input
                    hint_text: "Update Actual payment date (Format YYYY-MM-DD)"
    #                icon_right: "eye-off"


                MDLabel:
                    id: actual_payment_accepted_by_label
                    font_style: "Body1"
                    halign:"left"

                #the MDTextField below will be changed to a SelectField later!
                MDTextField:
                    id:actual_payment_accepted_by_input
                    hint_text: "Update Actual payment date accepted by"
    #                icon_right: "eye-off"


                MDLabel:
                    id: description_label
                    font_style: "Body1"
                    halign:"left"

                MDTextField:
                    id:description_input
                    hint_text: "Update Description"
    #                icon_right: "eye-off"


                MDLabel:
                    id: overdue_period_label
                    font_style: "Body1"
                    halign:"left"

                MDTextField:
                    id:overdue_period_input
                    hint_text: "Update Overdue period (days) "
    #                icon_right: "eye-off"


                MDLabel:
                    id: notes_for_penalty_label
                    font_style: "Body1"
                    halign:"left"


                MDTextField:
                    id:notes_for_penalty_input
                    hint_text: "Update Notes for penalty overdue"
    #                icon_right: "eye-off"



                MDLabel:
                    id: occurent_label
                    font_style: "Body1"
                    halign:"left"


                #the MDTextField below will be changed to a SelectField later!
                MDTextField:
                    id:occurent_input
                    hint_text: "Update Occurent"
    #                icon_right: "eye-off"


                MDLabel:
                    id: paid_amount_label
                    font_style: "Body1"
                    halign:"left"

                MDTextFieldRound:
                    id:paid_amount_input
                    hint_text: "Update paid amount"
                    normal_color: "5191b8"
    #                icon_right: "eye-off"


                MDLabel:
                    id: payment_date1_label
                    font_style: "Body1"
                    halign:"left"

                MDTextFieldRound:
                    id:payment_date1_input
                    hint_text: "Update input payment date 1 (Format YYYY-MM-DD)"
                    normal_color: "5191b8"
    #                icon_right: "eye-off"


                MDLabel:
                    id: payment_date2_label
                    font_style: "Body1"
                    halign:"left"


                MDTextFieldRound:
                    id:payment_date2_input
                    hint_text: "Update input payment date 2 (Format YYYY-MM-DD)"
                    normal_color: "5191b8"
    #                icon_right: "eye-off"


                MDRectangleFlatIconButton:
    #                icon: "account-key"
                    text: "Update invoice"
                    on_release:
                        root.update_invoice()

                MDRectangleFlatIconButton:
            #           icon: "food"
                    pos_hint: {'x': .305}
                    text: "<-Back to menu"
                    on_release:
                        root.back_to_menu()


<Export_excel_filtered_table_Screen>:

    BoxLayout:
        orientation: 'vertical'
        size: root.height, root.width

        FitImage:
            source: resource_path("coke_snack.jpeg")

        MDLabel:
            text: "Financiaz"
            font_style: "H6"
            halign:"left"


        MDLabel:
            text: "EXPORT FILTERED TABLE TO EXCEL"
            font_style: "H6"
            halign:"left"


        MDLabel:
            id: excel_filename_label
            font_style: "Body1"
            halign:"left"


        MDTextFieldRound:
            id:excel_filename_input
            hint_text: "Input the filename of your export Excel file:"

        MDRectangleFlatIconButton:
            text: "Export =>"
            on_release:
                root.export()

        MDRectangleFlatIconButton:
    #           icon: "food"
            text: "<-Back to menu"
            on_release:
                root.back_to_menu()



<Generate_reports_Screen>:
    BoxLayout:
        orientation: 'vertical'
        size: root.height, root.width

        MDLabel:
            text: "Financiaz"
            font_style: "H6"
            halign:"left"

        MDLabel:

        MDLabel:
            text: "GENERATE REPORTS"
            font_style: "H6"
            halign:"left"

        MDRectangleFlatIconButton:
            text: "Generate OVERDUE INVOICE REPORT"
            on_release:
                root.generate_overdue_invoice_report()

        MDRectangleFlatIconButton:
            text: "Generate INVOICE PAYMENT SCHEDULE REPORT"
            on_release:
                root.generate_invoice_payment_schedule_report()

        MDRectangleFlatIconButton:
            text: "<-Back to menu"
            on_release:
                root.back_to_menu()

